<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Explore Canada - CanFind</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@400;600;700;800&family=Source+Serif+4:wght@700;800&display=swap" rel="stylesheet">

    <style>
      :root{
        --red:#d32f2f; --red-dark:#b71c1c; --gold:#f4a100;
        --ink:#111318; --text:#1f2328; --muted:#667085;
        --bg:#fffdfb; --surface:#ffffff; --overlay:rgba(0,0,0,.45);
        --shadow:0 10px 24px rgba(0,0,0,.16);
        --maxw:1280px;
      }
      *{box-sizing:border-box}
      html{scroll-behavior:smooth}
      body{
        margin:0; background:var(--bg); color:var(--text);
        font-family:"Source Sans 3", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      }

      /* NAVBAR */
      .navbar{
        position:fixed; inset:0 0 auto 0; height:66px; z-index:1000;
        display:flex; align-items:center; justify-content:space-between;
        padding:0 18px; color:#fff;
        background:linear-gradient(180deg, var(--red) 0%, var(--red-dark) 100%);
        box-shadow:var(--shadow);
      }
      .brand{display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.2px; font-size:18px}
      .leaf{
        width:22px; height:22px; display:inline-block;
        -webkit-mask:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="white" d="M12 2l2.39 4.84L20 7.27l-4 3.9.94 5.48L12 14.77 7.06 16.65 8 11.17 4 7.27l5.61-.43z"/></svg>') center/contain no-repeat;
                mask:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="white" d="M12 2l2.39 4.84L20 7.27l-4 3.9.94 5.48L12 14.77 7.06 16.65 8 11.17 4 7.27l5.61-.43z"/></svg>') center/contain no-repeat;
        background:#fff;
      }

      .nav-left{display:flex; align-items:center; gap:18px}
      .menu{position:relative}
      .menu > button{
        background:transparent; border:0; color:#fff; font-weight:700; cursor:pointer;
        padding:8px 12px; border-radius:10px; font-size:16px;
      }
      .menu > button:hover{background:rgba(255,255,255,.12)}
      .dropdown{
        position:absolute; top:100%; left:0; min-width:240px;
        background:var(--surface); color:var(--ink); border-radius:12px; padding:8px;
        box-shadow:var(--shadow); margin-top:8px; display:none; z-index:999;
      }
      .menu[aria-expanded="true"] > .dropdown{display:block}
      .dropdown h4{
        margin:6px 8px; font-size:.82rem; letter-spacing:.02em; color:var(--muted); text-transform:uppercase;
      }
      .dropdown .action{
        display:flex; align-items:center; gap:10px;
        padding:10px 12px; border-radius:10px; border:0; background:transparent;
        color:var(--ink); font-weight:600; cursor:pointer; width:100%; text-align:left;
      }
      .dropdown .action:hover{background:#f3f5f7}
      .submenu{position:relative}
      .submenu > .dropdown{top:0; left:100%; margin-left:8px; display:none}
      .submenu:hover > .dropdown{display:block}

      .menu-btn{display:inline-flex; align-items:center; justify-content:center; width:44px; height:44px; border:0; border-radius:10px; background:transparent; cursor:pointer}
      .menu-btn:hover{background:rgba(255,255,255,.12)}
      .menu-icon, .menu-icon::before, .menu-icon::after{
        content:""; display:block; width:24px; height:2.5px; border-radius:2px;
        background:#fff; position:relative; transition:.2s ease;
      }
      .menu-icon::before{position:absolute; top:-7px}
      .menu-icon::after{position:absolute; top:7px}
      @media (max-width: 980px){ .nav-left{display:none} }

      /* SIDEBAR (Hamburger Drawer) ‚Äî THIS WAS MISSING */
      .sidebar{
        position:fixed; top:0; right:-340px; width:320px; height:100dvh;
        background:#ffffff; color:var(--ink); z-index:1500;
        box-shadow:-2px 0 18px rgba(0,0,0,.16);
        transition:right .28s ease;
        display:flex; flex-direction:column;
      }
      .sidebar.open{ right:0; }
      .overlay{
        position:fixed; inset:0; background:rgba(0,0,0,.45);
        z-index:1400; opacity:0; visibility:hidden; transition:opacity .28s ease, visibility .28s ease;
      }
      .overlay.show{ opacity:1; visibility:visible; }

      .drawer-head{
        display:flex; align-items:center; justify-content:space-between; gap:10px;
        padding:16px 18px; background:var(--red); color:#fff; font-weight:800;
      }
      .closebtn{border:0; background:transparent; color:#fff; font-size:28px; line-height:1; cursor:pointer}

      .drawer-content{flex:1; overflow:auto; padding:18px}
      .cta-signin{display:inline-block; margin-bottom:16px; font-weight:800; color:var(--red-dark); text-decoration:none}
      .cta-signin:hover{text-decoration:underline}
      .drawer-section{margin-bottom:22px}
      .drawer-section .drawer-title, .drawer-section h4{margin:0 0 10px; font-weight:800; color:var(--red-dark)}
      .drawer-button, .drawer-link, .signout, .drawer-select{
        width:100%; padding:10px 12px; border-radius:10px; border:1px solid #e6e6e6; background:#fafafa; cursor:pointer; font-weight:600; text-align:left;
      }
      .drawer-button:hover, .drawer-link:hover, .signout:hover, .drawer-select:hover{background:#f3f3f3}
      .drawer-button span{float:right; opacity:.7}
      .province-list{display:none; grid-template-columns:1fr 1fr; gap:8px; margin-top:10px}
      .province-list.open{display:grid}
      .province-list button{padding:8px 10px; border-radius:8px; border:1px solid #e6e6e6; background:#fff; cursor:pointer}
      .province-list button:hover{background:#f6f6f8}

      .divider{border:none; border-top:1px solid #e7e7e7; margin:6px 0 14px}
      .drawer-footer{padding:14px 18px; border-top:1px solid #eee}
      .signout{background:var(--red); color:#fff; border-color:var(--red-dark); text-align:center}

      /* MAIN / HERO */
      main{margin-top:66px}
      .hero{
        position:relative; min-height:calc(120dvh - 66px);
        background:url("/images/CanFind_BackImage.jpg") center/cover no-repeat;
        display:grid; place-items:center; overflow:hidden;
      }
      .hero::after{content:""; position:absolute; inset:0; background:linear-gradient(180deg, rgba(0,0,0,.15), rgba(0,0,0,.45))}
      .hero-box{
        position:relative; z-index:1; background:rgba(211,47,47,.85); color:#fff; padding:24px 26px; border-radius:16px; max-width:840px;
        box-shadow:0 10px 24px rgba(0,0,0,.25); backdrop-filter:saturate(1.1); animation:fadeUp .6s ease both .05s;
      }
      .hero-box h1{margin:0 0 8px; font-family:"Source Serif 4", Georgia, serif; font-size:clamp(2rem,4.5vw,3rem); line-height:1.1}
      .hero-box p{margin:0 0 12px; font-size:1.05rem}
      .hero-actions{display:flex; gap:10px; flex-wrap:wrap}
      .btn{display:inline-block; padding:11px 16px; border-radius:12px; font-weight:800; text-decoration:none; border:2px solid transparent}
      .btn-primary{background:#fff; color:#b71c1c; border-color:#fff}
      .btn-ghost{background:rgba(255,255,255,.16); color:#fff; border-color:rgba(255,255,255,.35)}
      @keyframes fadeUp{from{opacity:0; transform:translateY(8px)} to{opacity:1; transform:translateY(0)}}

      /* BANNERS (slimmer & slightly taller) */
      .banners{max-width:var(--maxw); margin:18px auto 40px; display:flex; flex-direction:column; gap:14px; padding:0 12px}
      .banner{position:relative; overflow:hidden; border-radius:18px; background:#000; width:min(90vw,1200px); margin-inline:auto; box-shadow:var(--shadow)}
      .banner img{width:100%; height:100%; object-fit:cover; aspect-ratio:28/9; filter:saturate(1.05) contrast(1.02); transform:scale(1.02); transition:transform .5s ease, filter .5s ease}
      .banner:hover img{transform:scale(1.06); filter:saturate(1.1)}
      .banner::after{content:""; position:absolute; inset:0; background:linear-gradient(180deg, rgba(0,0,0,.08) 10%, rgba(0,0,0,.55) 100%); z-index:1}
      .banner-content{position:absolute; inset:auto 0 0 0; z-index:2; color:#fff; padding:18px 20px 22px; display:flex; flex-direction:column; gap:10px}
      .banner h2{margin:0; font-family:"Source Serif 4", Georgia, serif; font-weight:800; letter-spacing:.2px; font-size:clamp(1.6rem, 3.2vw, 2.3rem); line-height:1.1}
      .banner p{margin:0; max-width:60ch; opacity:.98; font-size:1.02rem}
      .actions{display:flex; gap:10px; flex-wrap:wrap; margin-top:6px}
      @media (max-width:520px){ .actions{flex-direction:column} .btn{width:100%; text-align:center} }

      /* Reveal-on-scroll */
      .reveal{opacity:0; transform:translateY(8px); transition:.6s ease}
      .reveal.visible{opacity:1; transform:translateY(0)}

      /* FOOTER */
      .site-footer{background:#231a4a; color:#fff; margin-top:32px}
      .site-footer a{color:#e8e8f5; text-decoration:none}
      .site-footer a:hover{color:#fff; text-decoration:underline}
      .footer-top{max-width: var(--maxw); margin: 0 auto; padding: 28px 18px; display:grid; gap:24px; grid-template-columns: 2fr repeat(3, 1fr)}
      .footer-about p{margin:8px 0 0; color:#d7d7ea; line-height:1.5}
      .footer-col h4, .footer-about h3{margin:0 0 8px}
      .footer-col ul{list-style:none; padding:0; margin:0}
      .footer-col li{margin:6px 0}
      .footer-bottom{display:flex; align-items:center; justify-content:space-between; gap:12px; padding:10px 18px; background:#6b4ea8; font-size:.95rem}
      .socials{display:flex; gap:14px}
      .socials a svg{width:22px; height:22px; fill:#fff; opacity:.9}
      .socials a:hover svg{opacity:1}
      @media (max-width:900px){ .footer-top{grid-template-columns:1fr 1fr} }
      @media (max-width:560px){ .footer-top{grid-template-columns:1fr} .footer-bottom{flex-direction:column; align-items:flex-start} }

      /* COOKIES */
      :root{ --ck-red:#d32f2f; --ck-red-dark:#b71c1c; --ck-bg:#fff; --ck-text:#1f2328; --ck-muted:#6b7280; --ck-shadow:0 10px 30px rgba(0,0,0,.2) }
      #cookie-banner[hidden]{display:none !important;}
      .ck-btn{font:600 14px/1.1 system-ui, -apple-system, "Source Sans 3", Arial; padding:12px 14px; border-radius:10px; border:2px solid transparent; cursor:pointer}
      .ck-primary{background:var(--ck-red); color:#fff; border-color:var(--ck-red-dark)}
      .ck-outline{background:#fff; color:var(--ck-red-dark); border-color:var(--ck-red-dark)}
      .ck-ghost{background:transparent; color:#fff; border-color:rgba(255,255,255,.5)}
      .ck-banner{position:fixed; left:50%; bottom:16px; transform:translateX(-50%); width:min(900px, calc(100vw - 24px)); background:linear-gradient(180deg, var(--ck-red) 0%, var(--ck-red-dark) 100%); color:#fff; border-radius:14px; box-shadow:var(--ck-shadow); padding:16px; z-index:2000; display:grid; grid-template-columns:1fr auto; gap:16px; align-items:center;}
      .ck-text p{margin:6px 0 0; color:#fefefe}
      .ck-actions{display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end}
      @media (max-width:640px){ .ck-banner{grid-template-columns:1fr} .ck-actions{justify-content:stretch} .ck-btn{width:100%} }
      .ck-overlay{position:fixed; inset:0; background:rgba(0,0,0,.45); z-index:2100}
      .ck-modal{position:fixed; inset:50% auto auto 50%; transform:translate(-50%,-50%); width:min(720px, calc(100vw - 32px)); max-height:80vh; overflow:auto; background:var(--ck-bg); color:var(--ck-text); border-radius:16px; box-shadow:var(--ck-shadow); z-index:2200; padding:16px;}
      .ck-modal-head{display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:4px}
      .ck-x{border:0; background:transparent; font-size:28px; line-height:1; cursor:pointer}
      .ck-note{color:var(--ck-muted); margin:8px 2px 10px}
      .ck-list{list-style:none; padding:0; margin:10px 0}
      .ck-item{display:flex; align-items:center; justify-content:space-between; gap:12px; padding:12px; border-radius:12px; background:#f7f8fa; margin-bottom:10px}
      .ck-name{font-weight:700}
      .ck-desc{font-size:.92rem; color:var(--ck-muted)}
      .ck-modal-actions{display:flex; justify-content:flex-end; gap:10px; margin-top:8px}
      .ck-switch{position:relative; width:48px; height:28px; display:inline-block}
      .ck-switch input{opacity:0; width:0; height:0}
      .ck-switch span{position:absolute; cursor:pointer; inset:0; background:#cbd5e1; border-radius:999px; transition:.2s}
      .ck-switch span:before{content:""; position:absolute; height:22px; width:22px; left:3px; top:3px; background:white; border-radius:50%; transition:.2s; box-shadow:0 2px 6px rgba(0,0,0,.2)}
      .ck-switch input:checked + span{background:#16a34a}
      .ck-switch input:checked + span:before{transform:translateX(20px)}
      .ck-switch input:disabled + span{background:#94a3b8; opacity:.8}
    </style>
  </head>
  <body>
    <!-- NAVBAR -->
    <nav class="navbar" role="navigation" aria-label="Main">
      <div class="brand"><span class="leaf" aria-hidden="true"></span><span>CanFind</span></div>

      <div class="nav-left" aria-label="Primary">
        <!-- FOOD (broad categories) -->
        <div class="menu" aria-expanded="false">
          <button type="button">Food ‚ñæ</button>
          <div class="dropdown">
            <h4>Cuisines</h4>
            <button class="action">Canadian</button>
            <button class="action">Asian</button>
            <button class="action">European</button>
            <button class="action">Middle East & North Africa</button>
            <button class="action">Latin America & Caribbean</button>
            <button class="action">African</button>
            <button class="action">Vegetarian / Vegan</button>
            <h4>Budget</h4>
            <button class="action">Affordable</button>
            <button class="action">Mid-Range</button>
            <button class="action">Splurge</button>
          </div>
        </div>

        <!-- TRAVEL -->
        <div class="menu" aria-expanded="false">
          <button type="button">Travel ‚ñæ</button>
          <div class="dropdown">
            <button class="action">Museums & Galleries</button>
            <button class="action">Festivals & Events</button>
            <button class="action">Parks & Nature</button>
            <button class="action">Landmarks</button>
            <button class="action">Transit & Passes</button>
          </div>
        </div>

        <!-- COMMUNITY (hover secondary) -->
        <div class="menu" aria-expanded="false">
          <button type="button">Community ‚ñæ</button>
          <div class="dropdown">
            <button class="action">Settlement Centres</button>
            <button class="action">Language Exchange</button>
            <button class="action">Volunteer</button>
            <div class="menu submenu">
              <button type="button" class="action">Universities ‚ñ∏</button>
              <div class="dropdown">
                <h4>GTA</h4>
                <button class="action">University of Toronto</button>
                <button class="action">Toronto Metropolitan (TMU)</button>
                <button class="action">York University</button>
                <button class="action">OCAD University</button>
                <button class="action">U of T Mississauga</button>
                <button class="action">U of T Scarborough</button>
              </div>
            </div>
          </div>
        </div>

        <!-- CONNECT -->
        <div class="menu" aria-expanded="false">
          <button type="button">Connect ‚ñæ</button>
          <div class="dropdown">
            <button class="action">MapleChat Messaging</button>
            <button class="action">Support & Resources</button>
          </div>
        </div>
      </div>

      <button id="menu-button" class="menu-btn" aria-label="Open menu"><span class="menu-icon"></span></button>
    </nav>

    <!-- HERO -->
    <header class="hero">
      <div class="hero-box">
        <h1>Welcome to CanFind</h1>
        <p>Your friendly guide to food, events, and community services across the GTA ‚Äî built for newcomers and students.</p>
        <div class="hero-actions">
          <a class="btn btn-primary" href="#food">Get started</a>
          <a class="btn btn-ghost" href="#about">About us</a>
        </div>
      </div>
    </header>

    <!-- OVERLAY + SIDEBAR -->
    <div id="overlay" class="overlay" aria-hidden="true"></div>
    <aside id="sidebar" class="sidebar" aria-hidden="true">
      <div class="drawer-head">
        <span>Menu</span>
        <button id="close-sidebar" class="closebtn" aria-label="Close">√ó</button>
      </div>
      <div class="drawer-content">
        <a href="login.html" class="cta-signin">üë§ Profile / Sign In</a>

        <div class="drawer-section">
          <div class="drawer-title">Regions</div>
          <button id="province-toggle" class="drawer-button" type="button">Choose Province <span>‚ñæ</span></button>
          <div id="province-list" class="province-list">
            <button>Ontario</button><button>Qu√©bec</button><button>British Columbia</button><button>Alberta</button>
            <button>Manitoba</button><button>Saskatchewan</button><button>Nova Scotia</button><button>New Brunswick</button>
            <button>Newfoundland & Labrador</button><button>Prince Edward Island</button><button>Northwest Territories</button>
            <button>Yukon</button><button>Nunavut</button>
          </div>
        </div>

        <div class="drawer-section">
          <div class="drawer-title">Preferences</div>
          <button class="drawer-link" type="button">üåê Change Language</button>
          <button class="drawer-link" type="button">‚ôø Accessibility</button>
          <button class="drawer-link" type="button">üõ†Ô∏è Settings</button>
          <button class="drawer-link" type="button">üì® Help & Contact</button>
        </div>
      </div>
      <div class="drawer-footer">
        <hr class="divider" />
        <button class="signout" type="button">Sign Out</button>
      </div>
    </aside>

    <!-- SECTIONS -->
    <main>
      <section class="banners" aria-label="Explore sections">
        <article class="banner reveal" id="food">
          <img src="/images/Boxcar-Social-Toronto.jpg.png" alt="Coffees and pastries at a Toronto caf√©">
          <div class="banner-content">
            <h2>Food & Caf√©s</h2>
            <p>Inclusive cuisines from coast to coast ‚Äî plus affordable picks and cozy study spots.</p>
            <div class="actions">
              <a class="btn btn-primary" href="#">Find places</a>
              <a class="btn btn-ghost" href="#">Food guides</a>
            </div>
          </div>
        </article>

        <article class="banner reveal" id="travel">
          <img src="/images/downtowntorontoonwater.png" alt="Toronto skyline from the lake">
          <div class="banner-content">
            <h2>Travel & Events</h2>
            <p>Museums, festivals, parks and landmark walks ‚Äî plan a day out around the city.</p>
            <div class="actions">
              <a class="btn btn-primary" href="#">Plan a day out</a>
              <a class="btn btn-ghost" href="#">See events</a>
            </div>
          </div>
        </article>

        <article class="banner reveal" id="community">
          <img src="/images/romexterior.png" alt="Royal Ontario Museum exterior with Michael Lee-Chin Crystal">
          <div class="banner-content">
            <h2>Community & Culture</h2>
            <p>Settlement help, language exchange, volunteer opportunities and cultural highlights.</p>
            <div class="actions">
              <a class="btn btn-primary" href="#">Find centres</a>
              <a class="btn btn-ghost" href="#">How it works</a>
            </div>
          </div>
        </article>
      </section>
    </main>

    <!-- FOOTER -->
    <footer class="site-footer" role="contentinfo">
      <div class="footer-top">
        <section class="footer-about">
          <h3>About CanFind</h3>
          <p>CanFind helps newcomers and students in the GTA quickly discover food, events, and community resources ‚Äî with simple tools and clear guidance.</p>
        </section>
        <nav class="footer-col">
          <h4>Explore</h4>
          <ul>
            <li><a href="#food">Food</a></li>
            <li><a href="#travel">Travel</a></li>
            <li><a href="#community">Community</a></li>
          </ul>
        </nav>
        <nav class="footer-col">
          <h4>Resources</h4>
          <ul>
            <li><a href="#guide">Newcomer Guide</a></li>
            <li><a href="#">Language Options</a></li>
            <li><a href="#">Accessibility</a></li>
          </ul>
        </nav>
        <nav class="footer-col">
          <h4>Legal</h4>
          <ul>
            <li><a href="#" id="open-cookie-settings">Cookie settings</a></li>
            <li><a href="#">Privacy</a></li>
            <li><a href="#">Terms</a></li>
          </ul>
        </nav>
      </div>

      <div class="footer-bottom">
        <div class="socials">
          <a href="#" aria-label="Facebook" title="Facebook">
            <svg viewBox="0 0 24 24"><path d="M22 12.07C22 6.48 17.52 2 11.93 2 6.34 2 1.86 6.48 1.86 12.07c0 5.02 3.66 9.18 8.44 9.96v-7.05H7.9v-2.9h2.4V9.41c0-2.38 1.42-3.69 3.6-3.69 1.04 0 2.13.19 2.13.19v2.34h-1.2c-1.18 0-1.55.73-1.55 1.48v1.77h2.64l-.42 2.9h-2.22v7.05c4.78-.78 8.44-4.94 8.44-9.96z"/></svg>
          </a>
          <a href="#" aria-label="Instagram" title="Instagram">
            <svg viewBox="0 0 24 24"><path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm5 5a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm6.5-.9a1.1 1.1 0 1 0 0 2.2 1.1 1.1 0 0 0 0-2.2zM12 9a3 3 0 1 1 0 6 3 3 0 0 1 0-6z"/></svg>
          </a>
          <a href="#" aria-label="Twitter" title="Twitter">
            <svg viewBox="0 0 24 24"><path d="M22 5.92c-.73.32-1.5.53-2.32.62a4.05 4.05 0 0 0 1.78-2.24 8.06 8.06 0 0 1-2.57.98 4.03 4.03 0 0 0-6.88 3.67A11.44 11.44 0 0 1 3.16 4.8a4.03 4.03 0 0 0 1.25 5.38 4 4 0 0 1-1.83-.5v.05a4.03 4.03 0 0 0 3.23 3.95c-.45.12-.92.18-1.4.07a4.04 4.04 0 0 0 3.77 2.8A8.09 8.09 0 0 1 2 19.54a11.4 11.4 0 0 0 6.18 1.81c7.42 0 11.48-6.15 11.48-11.48 0-.18-.01-.36-.02-.54A8.2 8.2 0 0 0 22 5.92z"/></svg>
          </a>
        </div>
        <div class="copyright">¬© <span id="year"></span> CanFind. All rights reserved.</div>
      </div>
    </footer>

    <!-- COOKIES -->
    <div id="cookie-banner" class="ck-banner" role="dialog" aria-live="polite" aria-label="Cookie consent" aria-modal="true" hidden>
      <div class="ck-text">
        <strong>We use cookies</strong>
        <p>Choose ‚ÄúAccept all‚Äù to allow all cookies, or ‚ÄúAccept strictly necessary‚Äù to allow only essential cookies. You can manage preferences anytime.</p>
      </div>
      <div class="ck-actions">
        <button id="ck-manage" class="ck-btn ck-ghost" type="button">Manage preferences</button>
        <button id="ck-necessary" class="ck-btn ck-outline" type="button">Accept strictly necessary</button>
        <button id="ck-accept" class="ck-btn ck-primary" type="button">Accept all</button>
      </div>
    </div>

    <div id="ck-overlay" class="ck-overlay" hidden></div>
    <div id="cookie-modal" class="ck-modal" role="dialog" aria-modal="true" aria-labelledby="ck-title" hidden>
      <div class="ck-modal-head">
        <h2 id="ck-title">Cookie preferences</h2>
        <button id="ck-close" class="ck-x" aria-label="Close">√ó</button>
      </div>
      <p class="ck-note">Turn categories on or off. <strong>Strictly necessary</strong> cookies are required for the site to function and can‚Äôt be turned off.</p>
      <ul class="ck-list">
        <li class="ck-item">
          <div><div class="ck-name">Strictly necessary</div><div class="ck-desc">Security, session, and core functionality.</div></div>
          <label class="ck-switch"><input type="checkbox" checked disabled aria-label="Strictly necessary is required"><span></span></label>
        </li>
        <li class="ck-item"><div><div class="ck-name">Analytics</div><div class="ck-desc">Helps us improve the site.</div></div>
          <label class="ck-switch"><input type="checkbox" data-key="analytics"><span></span></label></li>
        <li class="ck-item"><div><div class="ck-name">Performance</div><div class="ck-desc">Improves speed and reliability.</div></div>
          <label class="ck-switch"><input type="checkbox" data-key="performance"><span></span></label></li>
        <li class="ck-item"><div><div class="ck-name">Functional</div><div class="ck-desc">Remembers settings like language.</div></div>
          <label class="ck-switch"><input type="checkbox" data-key="functional"><span></span></label></li>
        <li class="ck-item"><div><div class="ck-name">Advertising</div><div class="ck-desc">Personalized ads.</div></div>
          <label class="ck-switch"><input type="checkbox" data-key="advertising"><span></span></label></li>
      </ul>
      <div class="ck-modal-actions">
        <button id="ck-cancel" class="ck-btn ck-ghost" type="button">Cancel</button>
        <button id="ck-save" class="ck-btn ck-primary" type="button">Save my choices</button>
      </div>
    </div>

    <!-- SCRIPTS -->
    <script>
      /* NAV DROPDOWNS */
      (function(){
        const menus=[...document.querySelectorAll('.menu:not(.submenu)')];
        menus.forEach(m=>{
          m.querySelector(':scope > button').addEventListener('click',e=>{
            e.stopPropagation();
            const open=m.getAttribute('aria-expanded')==='true';
            menus.forEach(x=>x.setAttribute('aria-expanded','false'));
            m.setAttribute('aria-expanded',String(!open));
          });
        });
        document.addEventListener('click',()=>menus.forEach(x=>x.setAttribute('aria-expanded','false')));
      })();

      /* DRAWER */
      const sidebar=document.getElementById("sidebar");
      const menuButton=document.getElementById("menu-button");
      const closeSidebar=document.getElementById("close-sidebar");
      const overlay=document.getElementById("overlay");
      const provinceToggle=document.getElementById('province-toggle');
      const provinceList=document.getElementById('province-list');

      function openMenu(){
        sidebar.classList.add("open");
        overlay.classList.add("show");
        sidebar.setAttribute('aria-hidden','false');
        overlay.setAttribute('aria-hidden','false');
      }
      function closeMenu(){
        sidebar.classList.remove("open");
        overlay.classList.remove("show");
        sidebar.setAttribute('aria-hidden','true');
        overlay.setAttribute('aria-hidden','true');
      }
      menuButton.addEventListener("click",openMenu);
      closeSidebar.addEventListener("click",closeMenu);
      overlay.addEventListener("click",closeMenu);
      document.addEventListener("keydown",e=>{if(e.key==="Escape")closeMenu();});
      provinceToggle.addEventListener('click',()=>provinceList.classList.toggle('open'));

      /* FOOTER YEAR */
      document.getElementById('year').textContent=new Date().getFullYear();
      const cookieLink=document.getElementById('open-cookie-settings');
      if(cookieLink){cookieLink.addEventListener('click',e=>{e.preventDefault();hideCookieBanner();openModal();});}

      /* REVEAL ON SCROLL */
      const io=new IntersectionObserver((entries)=>entries.forEach(en=>{
        en.target.classList.toggle('visible',en.isIntersecting);
      }),{threshold:0.15});
      document.querySelectorAll('.reveal').forEach(el=>io.observe(el));

      /* COOKIES */
      const CK_KEY="canfind.cookiePrefs";
      const DEFAULT_PREFS={necessary:true,analytics:false,performance:false,functional:false,advertising:false};
      const $banner=document.getElementById("cookie-banner");
      const $modal=document.getElementById("cookie-modal");
      const $ovl=document.getElementById("ck-overlay");
      const $acceptAll=document.getElementById("ck-accept");
      const $acceptNec=document.getElementById("ck-necessary");
      const $manage=document.getElementById("ck-manage");
      const $close=document.getElementById("ck-close");
      const $cancel=document.getElementById("ck-cancel");
      const $save=document.getElementById("ck-save");

      const loadPrefs=()=>{try{return JSON.parse(localStorage.getItem(CK_KEY))||null;}catch{return null;}};
      const savePrefs=p=>localStorage.setItem(CK_KEY,JSON.stringify(p));

      function showBannerIfNeeded(){
        $banner.hidden=false;
        $banner.style.display='grid';
      }

      function hideCookieBanner(){ $banner.hidden=true; $banner.style.display='none'; }
      function openModal(){
        const prefs=loadPrefs()||DEFAULT_PREFS;
        document.querySelectorAll('.ck-switch input[data-key]').forEach(i=>i.checked=!!prefs[i.dataset.key]);
        $ovl.hidden=false; $modal.hidden=false;
        $modal.querySelector('button, input')?.focus();
      }
      function closeModal(){ $ovl.hidden=true; $modal.hidden=true; }

      $acceptAll.addEventListener('click',()=>{ savePrefs({necessary:true,analytics:true,performance:true,functional:true,advertising:true}); hideCookieBanner(); });
      $acceptNec.addEventListener('click',()=>{ savePrefs({...DEFAULT_PREFS}); hideCookieBanner(); });
      $manage.addEventListener('click',()=>{ hideCookieBanner(); openModal(); });
      $save.addEventListener('click',()=>{ 
        const prefs={...DEFAULT_PREFS};
        document.querySelectorAll('.ck-switch input[data-key]').forEach(i=>prefs[i.dataset.key]=i.checked);
        savePrefs(prefs); closeModal(); hideCookieBanner();
      });
      $close.addEventListener('click',closeModal);
      $cancel.addEventListener('click',closeModal);
      $ovl.addEventListener('click',closeModal);
      document.addEventListener('keydown',e=>{ if(e.key==='Escape' && !$modal.hidden) closeModal(); });

      showBannerIfNeeded();
    </script>
  </body>
</html>